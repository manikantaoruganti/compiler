<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Language Compiler</title>
  <style>
    :root {
      --bg-color: #0f2027;
      --text-color: white;
      --editor-bg: rgba(255, 255, 255, 0.05);
      --output-color: #00ffae;
      --control-bg: rgba(0, 0, 0, 0.3);
      --header-bg: rgba(0, 0, 0, 0.5);
    }

    .light-mode {
      --bg-color: #f4f4f4;
      --text-color: #222;
      --editor-bg: #fff;
      --output-color: #004d40;
      --control-bg: #ddd;
      --header-bg: #ccc;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg-color);
      color: var(--text-color);
      font-family: Consolas, monospace;
      display: flex;
      flex-direction: column;
      height: 100vh;
      transition: 0.3s;
    }

    header {
      background: var(--header-bg);
      padding: 15px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
    }

    #controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 10px;
      background: var(--control-bg);
      flex-wrap: wrap;
    }

    select {
      background-color: #0e0e0e;
      color: white;
      font-size: 16px;
      padding: 10px 14px;
      border: 1px solid #444;
      border-radius: 5px;
      outline: none;
      appearance: none;
      cursor: pointer;
      min-width: 180px;
      font-family: inherit;
    }

    body.light-mode select {
      background-color: #eee;
      color: #111;
      border-color: #999;
    }

    button {
      background: linear-gradient(to right, #0083b0, #00b4db);
      border: none;
      padding: 10px 20px;
      color: white;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background: linear-gradient(to right, #006d94, #00a6c4);
    }

    #code {
      flex: 1;
      padding: 15px;
      font-size: 14px;
      background: var(--editor-bg);
      color: var(--text-color);
      border: none;
      outline: none;
      resize: none;
      border-top: 1px solid #444;
      border-bottom: 1px solid #444;
    }

    #output {
      padding: 15px;
      min-height: 120px;
      background: var(--editor-bg);
      color: var(--output-color);
      white-space: pre-wrap;
      overflow-y: auto;
      font-size: 14px;
      border-top: 1px solid #444;
    }

    .mode-toggle {
      margin-top: 8px;
      font-size: 14px;
    }

    .mode-toggle input {
      margin-right: 5px;
    }

    footer {
      text-align: center;
      font-size: 13px;
      padding: 10px;
      color: gray;
      background: transparent;
    }
  </style>
</head>
<body>

  <header>Multi-Language Online Compiler</header>

  <div id="controls">
    <select id="language" onchange="loadTemplate()">
      <option value="cpp">C++</option>
      <option value="c">C</option>
      <option value="java">Java</option>
      <option value="python">Python</option>
      <option value="html">HTML</option>
      <option value="css">CSS</option>
      <option value="javascript">JavaScript</option>
      <option value="typescript">TypeScript</option>
      <option value="rust">Rust</option>
      <option value="csharp">C#</option>
      <option value="kotlin">Kotlin</option>
      <option value="go">Go</option>
      <option value="swift">Swift</option>
      <option value="ruby">Ruby</option>
      <option value="php">PHP</option>
      <option value="r">R</option>
      <option value="scala">Scala</option>
      <option value="sql">SQL</option>
    </select>

    <button onclick="runCode()">▶ Run Code</button>

    <label class="mode-toggle">
      <input type="checkbox" id="themeToggle" onchange="toggleTheme()"> Light Mode
    </label>
  </div>

  <textarea id="code" spellcheck="false">// Write your code here...</textarea>

  <div id="output">Output will appear here...</div>

  <footer>
    <span id="copyright"></span>
  </footer>

  <script>
    const templates = {
      cpp: `#include <iostream>\nusing namespace std;\nint main() {\n  cout << "Hello, World!";\n  return 0;\n}`,
      c: `#include <stdio.h>\nint main() {\n  printf("Hello, World!\\n");\n  return 0;\n}`,
      java: `public class Main {\n  public static void main(String[] args) {\n    System.out.println("Hello, World!");\n  }\n}`,
      python: `print("Hello, World!")`,
      html: `<!DOCTYPE html>\n<html>\n  <body>\n    <h1>Hello, World!</h1>\n  </body>\n</html>`,
      css: `body {\n  background: #111;\n  color: white;\n}`,
      javascript: `console.log("Hello, World!");`,
      typescript: `let msg: string = "Hello, World!";\nconsole.log(msg);`,
      rust: `fn main() {\n  println!("Hello, World!");\n}`,
      csharp: `using System;\nclass Program {\n  static void Main() {\n    Console.WriteLine("Hello, World!");\n  }\n}`,
      kotlin: `fun main() {\n  println("Hello, World!")\n}`,
      go: `package main\nimport "fmt"\nfunc main() {\n  fmt.Println("Hello, World!")\n}`,
      swift: `import Foundation\nprint("Hello, World!")`,
      ruby: `puts "Hello, World!"`,
      php: `<?php\necho "Hello, World!";\n?>`,
      r: `cat("Hello, World!\\n")`,
      scala: `object Main extends App {\n  println("Hello, World!")\n}`,
      sql: `SELECT 'Hello, World!';`
    };

    const filenameMap = {
      c: "main.c",
      cpp: "main.cpp",
      java: "Main.java",
      python: "main.py",
      javascript: "main.js",
      typescript: "main.ts",
      rust: "main.rs",
      csharp: "main.cs",
      kotlin: "main.kt",
      go: "main.go",
      swift: "main.swift",
      ruby: "main.rb",
      php: "main.php",
      r: "main.r",
      scala: "main.scala",
      sql: "main.sql",
      html: "index.html",
      css: "style.css"
    };

    function loadTemplate() {
      const lang = document.getElementById("language").value;
      document.getElementById("code").value = templates[lang] || "";
    }

    async function runCode() {
      const lang = document.getElementById("language").value;
      const code = document.getElementById("code").value;
      const outputDiv = document.getElementById("output");
      outputDiv.textContent = "Running...\n";

      try {
        const response = await fetch("https://emkc.org/api/v2/piston/execute", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            language: lang,
            version: "*",
            files: [{
              name: filenameMap[lang] || "main.txt",
              content: code
            }]
          })
        });

        const data = await response.json();
        outputDiv.textContent = data.run.output || data.compile.output || "No output.";
      } catch (error) {
        outputDiv.textContent = "⚠️ Error running code:\n" + error.message;
      }
    }

    function toggleTheme() {
      document.body.classList.toggle("light-mode");
    }

    // On page load
    window.onload = () => {
      loadTemplate();
      const year = new Date().getFullYear();
      document.getElementById("copyright").textContent = `© ${year} Manikanta`;
    };
  </script>

</body>
</html>
