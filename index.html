<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Language Online Compiler</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs/loader.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #0f2027;
      color: white;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background-color: rgba(0, 0, 0, 0.5);
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
    }
    #controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      background-color: rgba(0, 0, 0, 0.3);
      padding: 10px;
    }
    select, button {
      padding: 10px;
      border-radius: 5px;
      font-size: 14px;
    }
    #editor { flex: 1; height: 300px; }
    textarea, pre {
      background-color: #1a1a1a;
      color: #00ffae;
      padding: 10px;
      margin: 5px;
      font-family: Consolas, monospace;
      font-size: 14px;
      border: none;
      resize: vertical;
    }
    #output {
      white-space: pre-wrap;
      overflow-y: auto;
      min-height: 100px;
    }
    .light-mode {
      background-color: #f4f4f4 !important;
      color: #222 !important;
    }
  </style>
</head>
<body>

<header>Multi-Language Online Compiler</header>

<div id="controls">
  <select id="language" onchange="setTemplate()">
    <option value="python">Python</option>
    <option value="cpp">C++</option>
    <option value="c">C</option>
    <option value="java">Java</option>
    <option value="javascript">JavaScript</option>
    <option value="typescript">TypeScript</option>
    <option value="rust">Rust</option>
    <option value="csharp">C#</option>
    <option value="kotlin">Kotlin</option>
    <option value="go">Go</option>
    <option value="swift">Swift</option>
    <option value="ruby">Ruby</option>
    <option value="php">PHP</option>
    <option value="r">R</option>
    <option value="scala">Scala</option>
    <option value="sql">SQL</option>
  </select>

  <button onclick="runCode()">▶ Run Code</button>
  
  <label>
    <input type="checkbox" onchange="toggleTheme()"> Light Mode
  </label>
</div>

<div id="editor"></div>

<textarea id="customInput" placeholder="Enter custom input..."></textarea>

<pre id="output">Output will appear here...</pre>

<footer style="text-align:center; font-size:12px; color:gray; margin:10px;">© 2025 Manikanta</footer>

<script>
  let editor;

  const templates = {
    python: `a = int(input())\nb = int(input())\nprint("Sum is:", a + b)`,
    cpp: `#include <iostream>\nusing namespace std;\nint main() {\n  int a, b;\n  cin >> a >> b;\n  cout << "Sum is: " << a + b;\n  return 0;\n}`,
    c: `#include <stdio.h>\nint main() {\n  int a, b;\n  scanf("%d %d", &a, &b);\n  printf("Sum is: %d\\n", a + b);\n  return 0;\n}`,
    java: `import java.util.Scanner;\nclass Main {\n  public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    int a = sc.nextInt();\n    int b = sc.nextInt();\n    System.out.println("Sum is: " + (a + b));\n  }\n}`,
    javascript: `let a = prompt();\nlet b = prompt();\nconsole.log("Sum is:", Number(a) + Number(b));`,
    typescript: `let a: number = Number(prompt());\nlet b: number = Number(prompt());\nconsole.log("Sum is:", a + b);`,
    rust: `fn main() {\n  println!("Hello, World!");\n}`,
    csharp: `using System;\nclass Program {\n  static void Main() {\n    Console.WriteLine("Hello, World!");\n  }\n}`,
    kotlin: `fun main() {\n  println("Hello, World!")\n}`,
    go: `package main\nimport "fmt"\nfunc main() {\n  fmt.Println("Hello, World!")\n}`,
    swift: `import Foundation\nprint("Hello, World!")`,
    ruby: `puts "Hello, World!"`,
    php: `<?php\necho "Hello, World!";\n?>`,
    r: `cat("Hello, World!\\n")`,
    scala: `object Main extends App {\n  println("Hello, World!")\n}`,
    sql: `SELECT 'Hello, World!';`
  };

  const filenameMap = {
    c: "main.c", cpp: "main.cpp", java: "Main.java", python: "main.py",
    javascript: "main.js", typescript: "main.ts", rust: "main.rs", csharp: "main.cs",
    kotlin: "main.kt", go: "main.go", swift: "main.swift", ruby: "main.rb",
    php: "main.php", r: "main.r", scala: "main.scala", sql: "main.sql"
  };

  function setTemplate() {
    const lang = document.getElementById("language").value;
    editor.setValue(templates[lang] || "");
  }

  function toggleTheme() {
    document.body.classList.toggle("light-mode");
  }

  async function runCode() {
    const lang = document.getElementById("language").value;
    const code = editor.getValue();
    const input = document.getElementById("customInput").value;
    const output = document.getElementById("output");
    output.textContent = "Running...\n";

    const response = await fetch("https://emkc.org/api/v2/piston/execute", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        language: lang,
        version: "*",
        files: [{
          name: filenameMap[lang] || "main.txt",
          content: code
        }],
        stdin: input
      })
    });

    const data = await response.json();
    output.textContent = (data.run?.output || data.compile?.output || "No output.").trim();
  }

  // Load Monaco Editor
  require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs' } });
  require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(document.getElementById('editor'), {
      value: templates.python,
      language: 'python',
      theme: 'vs-dark'
    });

    document.getElementById('language').addEventListener('change', function() {
      editor.setValue(templates[this.value] || "");
      monaco.editor.setModelLanguage(editor.getModel(), this.value === "csharp" ? "csharp" : this.value);
    });
  });

</script>

</body>
</html>
