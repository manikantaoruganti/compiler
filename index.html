<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Language Online Compiler</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs/loader.min.js"></script>
  <style>
    :root {
      --bg-dark: #0f2027;
      --bg-light: #f4f4f4;
      --text-dark: white;
      --text-light: #222;
      --editor-dark: #1a1a1a;
      --editor-light: #ffffff;
      --output-dark: #00ffae;
      --output-light: #006666;
    }

    body {
      margin: 0;
      background: var(--bg-dark);
      color: var(--text-dark);
      font-family: Consolas, monospace;
      display: flex;
      flex-direction: column;
      height: 100vh;
      transition: background 0.3s, color 0.3s;
    }

    body.light-mode {
      background: var(--bg-light);
      color: var(--text-light);
    }

    header {
      background: rgba(0, 0, 0, 0.5);
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      position: relative;
    }

    #theme-toggle {
      position: absolute;
      right: 15px;
      top: 10px;
      background: #444;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 14px;
    }

    #controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.3);
      flex-wrap: wrap;
    }

    select {
      background-color: #0e0e0e;
      color: white;
      font-size: 14px;
      padding: 10px 14px;
      border: 1px solid #444;
      border-radius: 5px;
      font-family: inherit;
    }

    body.light-mode select {
      background-color: white;
      color: #111;
    }

    #editor-section {
      width: 100%;
    }

    #editor {
      height: 300px;
      border-top: 1px solid #444;
      border-bottom: 1px solid #444;
    }

    .button-group {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .action-button {
      background: linear-gradient(to right, #0083b0, #00b4db);
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 5px;
      cursor: pointer;
    }

    .action-button:hover {
      background: linear-gradient(to right, #006d94, #00a6c4);
    }

    #customInput, #output {
      background: var(--editor-dark);
      color: var(--output-dark);
      border: none;
      outline: none;
      resize: vertical;
      padding: 10px;
      margin: 5px;
      font-family: Consolas, monospace;
      font-size: 14px;
      min-height: 80px;
      transition: background 0.3s, color 0.3s;
    }

    body.light-mode #customInput,
    body.light-mode #output {
      background: var(--editor-light);
      color: var(--output-light);
    }

    #output {
      white-space: pre-wrap;
    }

    footer {
      text-align: center;
      font-size: 12px;
      color: gray;
      padding: 10px;
    }

    @media (max-width: 768px) {
      #controls {
        flex-direction: column;
        align-items: stretch;
      }

      select {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<header>
  Multi-Language Online Compiler
  <button id="theme-toggle" onclick="toggleTheme()">üåô</button>
</header>

<div id="controls">
  <select id="language" onchange="setTemplate()">
    <option value="python">Python</option>
    <option value="cpp">C++</option>
    <option value="c">C</option>
    <option value="java">Java</option>
    <option value="javascript">JavaScript</option>
    <option value="typescript">TypeScript</option>
    <option value="rust">Rust</option>
    <option value="csharp">C#</option>
    <option value="kotlin">Kotlin</option>
    <option value="go">Go</option>
    <option value="swift">Swift</option>
    <option value="ruby">Ruby</option>
    <option value="php">PHP</option>
    <option value="r">R</option>
    <option value="scala">Scala</option>
    <option value="sql">SQL</option>
  </select>
</div>

<div id="editor-section">
  <div id="editor"></div>
</div>

<div class="button-group">
  <button class="action-button" onclick="setTemplate()">‚ü≥ Reset</button>
  <button class="action-button" onclick="runCode()">‚ñ∂ Run Code</button>
</div>

<textarea id="customInput" placeholder="Enter custom input..."></textarea>

<pre id="output">Output will appear here...</pre>

<footer>¬© 2025 Manikanta</footer>

<script>
  let editor;

  const templates = {
    python: `a = int(input())\nb = int(input())\nprint("Sum is:", a + b)`,
    cpp: `#include <iostream>\nusing namespace std;\nint main() {\n  int a, b;\n  cin >> a >> b;\n  cout << "Sum is: " << a + b;\n  return 0;\n}`,
    c: `#include <stdio.h>\nint main() {\n  int a, b;\n  scanf("%d %d", &a, &b);\n  printf("Sum is: %d\\n", a + b);\n  return 0;\n}`,
    java: `import java.util.Scanner;\nclass Main {\n  public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    int a = sc.nextInt();\n    int b = sc.nextInt();\n    System.out.println("Sum is: " + (a + b));\n  }\n}`,
    javascript: `let a = prompt();\nlet b = prompt();\nconsole.log("Sum is:", Number(a) + Number(b));`,
    typescript: `let a: number = Number(prompt());\nlet b: number = Number(prompt());\nconsole.log("Sum is:", a + b);`,
    rust: `fn main() {\n  println!("Hello, World!");\n}`,
    csharp: `using System;\nclass Program {\n  static void Main() {\n    Console.WriteLine("Hello, World!");\n  }\n}`,
    kotlin: `fun main() {\n  println("Hello, World!")\n}`,
    go: `package main\nimport "fmt"\nfunc main() {\n  fmt.Println("Hello, World!")\n}`,
    swift: `import Foundation\nprint("Hello, World!")`,
    ruby: `puts "Hello, World!"`,
    php: `<?php\necho "Hello, World!";\n?>`,
    r: `cat("Hello, World!\\n")`,
    scala: `object Main extends App {\n  println("Hello, World!")\n}`,
    sql: `SELECT 'Hello, World!';`
  };

  const filenameMap = {
    c: "main.c", cpp: "main.cpp", java: "Main.java", python: "main.py",
    javascript: "main.js", typescript: "main.ts", rust: "main.rs", csharp: "main.cs",
    kotlin: "main.kt", go: "main.go", swift: "main.swift", ruby: "main.rb",
    php: "main.php", r: "main.r", scala: "main.scala", sql: "main.sql"
  };

  function setTemplate() {
    const lang = document.getElementById("language").value;
    editor.setValue(templates[lang] || "");
    monaco.editor.setModelLanguage(editor.getModel(), lang === "csharp" ? "csharp" : lang);
  }

  async function runCode() {
    const lang = document.getElementById("language").value;
    const code = editor.getValue();
    const input = document.getElementById("customInput").value;
    const output = document.getElementById("output");
    output.textContent = "Running...\n";

    const response = await fetch("https://emkc.org/api/v2/piston/execute", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        language: lang,
        version: "*",
        files: [{ name: filenameMap[lang] || "main.txt", content: code }],
        stdin: input
      })
    });

    const data = await response.json();
    output.textContent = (data.run?.output || data.compile?.output || "No output.").trim();
  }

  function toggleTheme() {
    const body = document.body;
    const toggle = document.getElementById('theme-toggle');
    body.classList.toggle('light-mode');
    toggle.textContent = body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô';
    monaco.editor.setTheme(body.classList.contains('light-mode') ? 'vs' : 'vs-dark');
  }

  require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs' } });
  require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(document.getElementById('editor'), {
      value: templates.python,
      language: 'python',
      theme: 'vs-dark',
      automaticLayout: true
    });

    document.getElementById('language').addEventListener('change', function() {
      setTemplate();
    });
  });
</script>

</body>
</html>
